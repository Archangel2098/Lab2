	.ORIG X3000

;SEARCH PROGRAM
;CONNOR SIMPSON
;CWS2679
;DUE 10/26/2019

	LD	R0	POINTER		
	ADD	R0	R0	#-1	;CREATE A COUNTER FOR THE PROGRAM

CYCLE	ADD	R0	R0	#2	;INCREMENT THE COUNTER

	LDR 	R7	R0 	#-1	;CHECK THE DATA IN EVENT

	BRZ 	SEARCH			;IF NO EVENTS, MOVE ON TO SEARCH

	LD	R5	POINTER		;START A POINTER FOR CHECK
		
	LDR	R3	R0	#-1	
	LDR	R1	R0	#0	;LOAD THE CURRENT EVENT INTO R1 AND R3

	NOT	R1	R1
	ADD	R1	R1	#1	;MAKE R1 NEGATIVE TO CHECK EASIER

CHECK	LDR	R4	R5	#0	
	LDR	R2	R5	#1	;LOAD THE EVENT TO CHECK AGAINST

	ADD	R5	R5	#2	;INCREMENT R5

	ADD	R7	R1	R2	;CHECK WHICH DATE IS LARGER
	BRN	PLACE			;IF THE NUMBER IS BIGGER, SHIFT EVERYTHING DOWN
	BRP	CHECK			;IF THE NUMBER IS SMALLER, KEEP CHECKING
	BRZ	CYCLE			;IF THE NUMBER IS EQUAL, IT IS THE SMALLEST IN THE LIST, START A NEW CYCLE

PLACE	NOT	R1	R1
	ADD	R1	R1	#1	;MAKE R1 POSITIVE AGAIN

SHIFT	STR	R3	R0	#-1
	STR	R1	R0	#0	;STORE THE NEW DATE WHERE IT IS SUPPOSED TO BE
	
	ADD	R1	R2	#0
	ADD	R3	R4	#0	;SHIFT THE REGISTERS

	ADD	R0	R0	#2	;INCREASE THE POINTER

	LDR	R4	R0	#-1	
	LDR	R2	R0	#0	
	BRZ	CYCLE			;LOAD THE NEW DATA IN, LEAVE IF YOU HAVE REACHED THE END
	
	BRP	SHIFT			;LOOP

SEARCH	
	LD	R0	TABLE
	LD	R1	FIRST
	LD	R2	SECOND
	LD	R3	THIRD
	LD	R4	FOURTH
	AND	R5	R5	#0	;SET UP ALL OF THE TABLE LABELS
	
	STR	R1	R0	#0
	STR	R2	R0	#2
	STR	R3	R0	#4
	STR	R4	R0	#6
	STR	R5	R0	#8	;STORE ALL OF THE TABLE LABELS
	
	LD	R7	POINTER	
	ADD	R7	R7	#1	;MAKE R7 THE FIRST YEAR
	AND	R1	R1	#0	;CLEAR R1
	NOT	R2	R2
	ADD	R2	R2	#1	;MAKE R2 -1901
	
LOOP1	LDR	R5	R7	#-1
	BRZ	END1
	LDR	R5	R7	#0
	ADD	R6	R2	R5
	
	BRZP	END1
	
	ADD	R1	R1	#1
	ADD	R7	R7	#2	;INCREMENT THE COUNTER AND THE POINTER

	BRNZP LOOP1
	
END1	STR	R1	R0	#1

	AND	R1	R1	#0	;CLEAR R1
	NOT	R3	R3
	ADD	R3	R3	#1	;MAKE R3 -1951
	
LOOP2	LDR	R5	R7	#-1
	BRZ	END2
	LDR	R5	R7	#0
	ADD	R6	R3	R5
	
	BRZP	END2
	
	ADD	R1	R1	#1
	ADD	R7	R7	#2	;INCREMENT THE COUNTER AND THE POINTER

	BRNZP LOOP2
	
END2	STR	R1	R0	#3

	AND	R1	R1	#0	;CLEAR R1
	NOT	R4	R4
	ADD	R4	R4	#1	;MAKE R3 -2001
	
LOOP3	LDR	R5	R7	#-1
	BRZ	END3
	LDR	R5	R7	#0
	ADD	R6	R4	R5
	
	BRZP	END3
	
	ADD	R1	R1	#1
	ADD	R7	R7	#2	;INCREMENT THE COUNTER AND THE POINTER

	BRNZP LOOP3
	
END3	STR	R1	R0	#5

	AND	R1	R1	#0	;CLEAR R1
	
LOOP4	LDR	R5	R7	#-1
	BRZ	END4

	ADD	R1	R1	#1
	ADD	R7	R7	#2	;INCREMENT THE COUNTER AND THE POINTER

	BRNZP LOOP4
	
END4	STR	R1	R0	#7

FINISH	HALT

POINTER .FILL 	X4000
TABLE	.FILL	X6000
FIRST	.FILL	X1900
SECOND	.FILL	X1901
THIRD	.FILL	X1951
FOURTH	.FILL	X2001

	.END